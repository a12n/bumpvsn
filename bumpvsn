#/bin/sh

WHICH=
case $1 in
    major|maj|M)
        WHICH=major
        ;;
    minor|min|m)
        WHICH=minor
        ;;
    micro|patch|mic|pat|u|p)
        WHICH=patch
        ;;
    *)
        echo "Usage: $0 major|minor|patch"
        exit 1
        ;;
esac

# TODO

for x in MAJOR MINOR PATCH; do
    v=$(sed "/^set(.*$x.*)\$/ s/.* \\([0-9]\\+\\))/\\1/ p; d" CMakeLists.txt)
    eval $x=$v
done

echo $MAJOR.$MINOR.$PATCH
